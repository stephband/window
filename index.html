<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <meta name="description" content="" />

    <title>Window</title>

    <script>document.documentElement.className = 'js';</script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <link rel="stylesheet" href="../bolt/css/html.css" />

    <style>
        :root {
            height: 100%;
        }

        body {
            display: flex;
            min-height: 100%;
        }

        b {
            font-weight: normal;
            color: rgb(200,100,0);
        }

        pre {
            font-family: 'Menlo', 'Andale Mono', monospace;
            font-size: 0.75em;
        }

        .guide {
            font-family: 'Menlo', 'Andale Mono', monospace;
            font-size: 0.75em;
            color: #666666;
        }

        .x-guide {
            text-align: center;
            padding-top: 0.125rem;
            border-top: 1px solid rgba(0,0,0,0.333333);
        }

        .y-guide {
            padding-top: 48vh;
            padding-left: 0.125rem;
            border-left: 1px solid rgba(0,0,0,0.333333);
        }

        body > .guide {
            position: absolute;
        }

        body > .x-guide {
            top: 15px;
            left: 0;
        }

        body > .y-guide {
            top: 0;
            left: 15px;
        }
    </style>
</head>

<body>

<pre>window: {
    devicePixelRatio: <b id="devicePixelRatio"></b>
    font-size:    <b id="em"></b> (<b>1rem</b>)
    innerWidth:   <b id="innerWidth"></b> (<b id="emInnerWidth"></b>)
    innerHeight:  <b id="innerHeight"></b> (<b id="emInnerHeight"></b>)
    outerWidth:   <b id="outerWidth"></b> (<b id="emOuterWidth"></b>)
    outerHeight:  <b id="outerHeight"></b> (<b id="emOuterHeight"></b>)
}

screen: {
    width:        <b id="screenWidth"></b> (<b id="emScreenWidth"></b>)
    height:       <b id="screenHeight"></b> (<b id="emScreenHeight"></b>)
    availWidth:   <b id="availWidth"></b> (<b id="emAvailWidth"></b>)
    availHeight:  <b id="availHeight"></b> (<b id="emAvailHeight"></b>)
}

document: {
    scrollingElement: <b id="scrollingElement"></b>
}

event: {
    type:         <b id="type"></b>
    timeStamp:    <b id="timeStamp"></b><span id="line-clientX">
    clientX:      <b id="clientX"></b></span><span id="line-clientY">
    clientY:      <b id="clientY"></b></span><span id="line-pageX">
    screenX:      <b id="pageX"></b></span><span id="line-pageY">
    screenY:      <b id="pageY"></b></span><span id="line-pointerType">
    pointerType:  <b id="pointerType"></b></span><span id="line-pointerId">
    pointerId:    <b id="pointerId"></b></span><span id="line-pointerWidth">
    width:        <b id="pointerWidth"></b></span><span id="line-pointerHeight">
    height:       <b id="pointerHeight"></b></span><span id="line-pointerTiltX">
    tiltX:        <b id="pointerTiltX"></b></span><span id="line-pointerTiltY">
    tiltY:        <b id="pointerTiltY"></b></span><span id="line-pointerPressure">
    pressure:     <b id="pointerPressure"></b></span><span id="line-key">
    key:          <b id="key"></b></span><span id="line-code">
    code:         <b id="code"></b></span><span id="line-altKey">
    altKey:       <b id="altKey"></b></span><span id="line-ctrlKey">
    ctrlKey:      <b id="ctrlKey"></b></span><span id="line-metaKey">
    metaKey:      <b id="metaKey"></b></span><span id="line-shiftKey">
    shiftKey:     <b id="shiftKey"></b></span>
}</pre>

<div class="x-guide guide" id="widthGuide" style="width: 100%;">100% <b id="widthPercent"></b></div>
<div class="x-guide guide" id="widthGuideVw" style="width: 100vw; top: 60px;">100vw <b id="widthVw"></b></div>
<div class="y-guide guide" id="heightGuide" style="height: 100%;">100%<br/><b id="heightPercent"></b></div>
<div class="y-guide guide" id="heightGuideVh" style="height: 100vh; left: 60px;">100vh<br/><b id="heightVh"></b></div>

    <script>
        function refresh() {
            var rem = parseInt(getComputedStyle(document.documentElement).fontSize, 10);

            document.getElementById('devicePixelRatio').innerHTML = window.devicePixelRatio;
            document.getElementById('em').innerHTML = rem;
            document.getElementById('innerWidth').innerHTML =  window.innerWidth;
            document.getElementById('innerHeight').innerHTML = window.innerHeight;
            document.getElementById('emInnerWidth').innerHTML = window.innerWidth / rem + 'rem';
            document.getElementById('emInnerHeight').innerHTML = window.innerHeight / rem + 'rem';
            document.getElementById('outerWidth').innerHTML =  window.outerWidth;
            document.getElementById('outerHeight').innerHTML = window.outerHeight;
            document.getElementById('emOuterWidth').innerHTML = window.outerWidth / rem + 'rem';
            document.getElementById('emOuterHeight').innerHTML = window.outerHeight / rem + 'rem';
            document.getElementById('screenWidth').innerHTML = window.screen.width;
            document.getElementById('screenHeight').innerHTML = window.screen.height;
            document.getElementById('emScreenWidth').innerHTML = window.screen.width / rem + 'rem';
            document.getElementById('emScreenHeight').innerHTML = window.screen.height / rem + 'rem';
            document.getElementById('availWidth').innerHTML = window.screen.availWidth;
            document.getElementById('availHeight').innerHTML = window.screen.availHeight;
            document.getElementById('emAvailWidth').innerHTML = window.screen.availWidth / rem + 'rem';
            document.getElementById('emAvailHeight').innerHTML = window.screen.availHeight / rem + 'rem';
            document.getElementById('scrollingElement').textContent = document.scrollingElement ?
                '<' + document.scrollingElement.tagName.toLowerCase() + '>' :
                document.scrollingElement ;

            var widthPercent  = document.getElementById('widthGuide').clientWidth;
            var widthVw       = document.getElementById('widthGuideVw').clientWidth;
            var heightPercent = document.getElementById('heightGuide').clientHeight;
            var heightVh      = document.getElementById('heightGuideVh').clientHeight;

            document.getElementById('widthPercent').innerHTML = widthPercent;
            document.getElementById('widthVw').innerHTML = widthVw;
            document.getElementById('heightPercent').innerHTML = heightPercent;
            document.getElementById('heightVh').innerHTML = heightVh;
        }

        window.addEventListener('orientationchange', refresh);
        window.addEventListener('resize', refresh);
        window.addEventListener('load', refresh);

        function updateElem(id, name, e) {
            if (e[name] === undefined) {
                document.getElementById('line-' + id).hidden = true;
            }
            else {
                document.getElementById('line-' + id).hidden = false;
                document.getElementById(id).innerHTML   = e[name];
            }
        }

        function refreshEvent(e) {
            console.log(e.type, e.timeStamp);

            document.getElementById('type').innerHTML      = e.type;
            document.getElementById('timeStamp').innerHTML = e.timeStamp;

            updateElem('clientX', 'clientX', e);
            updateElem('clientY', 'clientY', e);
            updateElem('pageX', 'pageX', e);
            updateElem('pageY', 'pageY', e);
            updateElem('pointerType', 'pointerType', e);
            updateElem('pointerId', 'pointerId', e);
            updateElem('pointerWidth', 'width', e);
            updateElem('pointerHeight', 'height', e);
            updateElem('pointerTiltX', 'tiltX', e);
            updateElem('pointerTiltY', 'tiltY', e);
            updateElem('pointerPressure', 'pressure', e);
            updateElem('key', 'key', e);
            updateElem('code', 'code', e);
            updateElem('altKey', 'altKey', e);
            updateElem('ctrlKey', 'ctrlKey', e);
            updateElem('shiftKey', 'shiftKey', e);
            updateElem('metaKey', 'metaKey', e);

            // Neuter mouse events if this is pointer event
            if (e.type.startsWith('pointer')) {
                e.preventDefault();
            }
        }

        document.addEventListener('mousedown', refreshEvent);
        document.addEventListener('mousemove', refreshEvent);
        document.addEventListener('mouseup', refreshEvent);
        document.addEventListener('click', refreshEvent);
        document.addEventListener('keydown', refreshEvent);
        document.addEventListener('keyup', refreshEvent);
        document.addEventListener('keypress', refreshEvent);
        document.addEventListener('touchstart', refreshEvent);
        document.addEventListener('touchmove', refreshEvent);
        document.addEventListener('touchend', refreshEvent);
        document.addEventListener('pointerdown', refreshEvent);
        document.addEventListener('pointermove', refreshEvent);
        document.addEventListener('pointerup', refreshEvent);

        refreshEvent({ type: '', timeStamp: '', preventDefault: function() {} });
    </script>
</body>
</html>
